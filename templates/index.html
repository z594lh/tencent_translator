<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>腾讯云翻译器</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>

<div class="container">
  <h1>🌐 腾讯云在线翻译器</h1>

  <div class="translator-box">
    <textarea id="input-text" placeholder="在此输入要翻译的内容..."></textarea>
    
    <div class="controls">
      <select id="source-lang">
        <option value="auto">自动检测</option>
        <option value="en">英语</option>
        <option value="zh">中文</option>
        <option value="ja">日语</option>
        <option value="ko">韩语</option>
        <!-- 可以继续添加更多语言选项 -->
      </select>
      
      <span>→</span>
      
      <select id="target-lang">
        <option value="zh">中文</option>
        <option value="en">英语</option>
        <option value="ja">日语</option>
        <option value="ko">韩语</option>
        <option value="ms">马来语</option>
        <!-- 可扩展 -->
      </select>
      
      <button onclick="doTranslate()">翻译</button>
    </div>

    <div class="result-box" id="result-box">
      翻译结果将显示在这里...
    </div>
  </div>
</div>

<footer style="text-align: center; padding: 20px; background-color: #f8f8f8; border-top: 1px solid #e7e7e7;">
    <p>Powered by <a href="{{ author_link }}" target="_blank">zhongyw</a></p>
</footer>
<script>
function doTranslate() {
  const input = document.getElementById("input-text").value.trim();
  const source = document.getElementById("source-lang").value;
  const target = document.getElementById("target-lang").value;

  if (!input) {
    alert("请输入要翻译的内容");
    return;
  }

  fetch("/translate", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ text: input, source, target })
  })
  .then(res => res.json())
  .then(data => {
    document.getElementById("result-box").innerText = data.translated;
  })
  .catch(err => {
    console.error(err);
    alert("翻译失败，请查看控制台错误信息");
  });
}
</script>

</body>
</html>